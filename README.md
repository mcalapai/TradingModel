# TradingModel
## Introduction
This model takes a momentum-based trading strategy and filters signals into "buy" and "ignore" based on an XGBoost classification algorithm. Specifically, the algorithm forms what I call a "Candle Pocket" for the signal by taking a window of the OHLCV time-series data prior to the signal generated by the momentum-based strategy. It then uses the Candle Pocket time-series data to generate a large collection of features for the machine learning algorithm, namely time-series characteristics such as entropy and autocorrelation, as well as traditional market indicators such as RSI and stochastic oscillators. Relevant features are then extracted based on statistical significance tests, and the newly formed Candle Pockets are used to train an XGBoost model, classifying each Candle Pocket as a "buy" or "ignore" signal.

## Main Files
### SymbolPreprocess
This file downloads, cleans and processes data for several cryptocurrency symbols. An algorithm automatically labels the downloaded data based on the manual momentum-based trading strategy. Candle Pockets are then formed using these signals and time-series and indicator feature engineering is performed. Relevant features are extracted and some basic data visualisation is performed.

#### Auto-labelling
The `SymbolPreprocess.ipynb` file automatically labels the data based on a simple momentum-based strategy, specifically a volume breakout strategy. The program detects large amounts of incoming volume on the symbol and generates a "buy" signal. An example of an automatically generated label is given below:

<p align="center">
  <img src="/example-images/vol-breakout.png" width="70%">
</p>
<h4 align="center">Figure 1: Example signals generated by "volume breakout" strategy</h4>

#### Candle Pockets
An example of a Candle Pocket is shown below:

<p align="center">
  <img src="/example-images/candlepocket.png" width="70%">
</p>
<h4 align="center">Figure 2: Example Candle Pocket data</h4>

Essentially, a Candle Pocket is a "pocket" of price data that is formed in the moments leading up to a signal generated by the momentum-based strategy. Combining this with time-series feature engineering and some indicator-based features, we can see if there is any "anamolous" price behaviour that leads up to the momentum breakout. One suggested future improvement is to use tick and transaction data here, instead of ordinary OHLCV data.

### SymbolModel
This file takes in the data generated in `SymbolPreprocess.ipynb` and prepares it for the ML model. Data is cleaned and split into train and test sets, and the model is trained. Some basic hyperparameter optimisation is also performed.

#### Results
After grid hyperparemeter optimisation, the system achieved a prediction accuracy of 75.65%, an AUC of 0.84 and an F1 score of 0.538. 

<p align="center">
  <img src="/example-images/roc-curve.png" width="40%"/>
</p>
<h4 align="center">Figure 3: Model ROC</h4>

<p align="center">
  <img src="/example-images/confusion-matrix.png" width="40%"/>
</p>
<h4 align="center">Figure 4: Confusion Matrix</h4>

<p align="center">
  <img src="/example-images/feature-importance.png" width="70%"/>
</p>
<h4 align="center">Figure 5: Feature Importance</h4>

As we can see from the feature importances, the FFT coefficient for the Volume Oscillator indicator seems to be the most relevant feature in predicting the outcome of the manually generated signal. This makes sense, as the strategy is based on abnormally large values in the volume oscillator.

## Further Improvements
The model can be further improved by improving the quality of the signals generated by the manual trading strategy. Furthermore, the auto-labelling function may be improved by utilising Lopez De Prado's "Triple Barrier Method".
